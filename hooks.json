{
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-retrieve",
            "timeout": 60
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "Plan",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A plan has been created. Review it and output JSON to save it as a project spec: {\"action\":\"upsert\",\"kind\":\"spec\",\"title\":\"<plan title>\",\"body\":\"<full plan details including steps>\",\"status\":\"open\"}. Output ONLY the JSON, no other text.",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-persist-plan",
            "timeout": 60
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review the conversation. Classify the work and output ONE JSON object. Bug fix: {\"action\":\"upsert\",\"kind\":\"issue\",\"title\":\"...\",\"body\":\"...\",\"status\":\"resolved\"}. Architectural change (new patterns, structural reorganization, API design): {\"action\":\"upsert\",\"kind\":\"arch\",\"title\":\"...\",\"body\":\"<describe the architectural decision and rationale>\",\"status\":\"resolved\"}. Feature update or improvement to existing functionality: {\"action\":\"upsert\",\"kind\":\"update\",\"title\":\"...\",\"body\":\"<summary of what was changed>\",\"status\":\"resolved\"}. New specification or plan (not yet implemented): {\"action\":\"upsert\",\"kind\":\"spec\",\"title\":\"...\",\"body\":\"<plan details>\",\"status\":\"open\"}. Completing a planned spec: {\"action\":\"upsert\",\"kind\":\"spec\",\"title\":\"...\",\"body\":\"<summary of what was implemented>\",\"status\":\"resolved\"}. If none apply, output {\"action\":\"none\"}. Output ONLY the JSON, no other text.",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-persist",
            "timeout": 60
          }
        ]
      }
    ]
  }
}
